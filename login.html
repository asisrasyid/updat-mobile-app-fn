<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Managament Finance</title>
		<link rel="manifest" href="/updat-mobile-app-fn/manifest.json" />
  		<meta name="theme-color" content="#4CAF50"/>
  		<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/906/906334.png" />

		<!-- all css -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="assets/css/jquery-ui.css" />
		<link rel="stylesheet" href="assets/css/slick.css" />
		<link rel="stylesheet" href="assets/css/line-awesome.css" />
		<link rel="stylesheet" href="assets/css/nice-select.css" />
		<link rel="stylesheet" href="assets/css/style.css" />
		<link rel="stylesheet" href="assets/css/responsive.css" />
		<link rel="stylesheet" href="assets/sweetalert2/sweetalert2.css">
		<style>
			/* Gaya untuk input (text, number, email, dll) */
			.input-styled {
			  width: 100%;
			  max-width: 300px;
			  padding: 12px 16px;
			  border: 2px solid;
			  border-radius: 10px;
			  background-color: #f9f9f9;
			  color: #333;
			  font-size: 16px;
			  font-family: 'Segoe UI', sans-serif;
			  transition: all 0.3s ease;
			  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
			}
			
			/* Hover & Focus effect */
			.input-styled:hover,
			.input-styled:focus {
			  background-color: #fff;
			  outline: none;
			  box-shadow: 0 5px 10px rgba(72, 187, 120, 0.3);
			}
			
			/* Placeholder style */
			.input-styled::placeholder {
			  color: #999;
			  transition: color 0.3s ease;
			}
			
			/* Saat focus, placeholder agak menghilang */
			.input-styled:focus::placeholder {
			  color: transparent;
			}
			</style>
	</head>

	<body style="height:100vh;">
		<!-- Preloader -->
		<div class="preloader">
			<img src="assets/images/preloader.gif" alt="preloader" />
		</div>

		<!-- Settings -->
		<div class="theme_settings">
			<button type="button" id="settings_toggler">
				<i class="las la-cog"></i>
			</button>
			<h3>Themes settings</h3>

			<h5>Primary Colors</h5>
			<div class="setting_colors">
				<button data-color="#FD3D57" class="prime_1 change_prime_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#3498db" class="prime_2 change_prime_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#1abc9c" class="prime_3 change_prime_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#F79F1F" class="prime_4 change_prime_color">
					<i class="icon las la-check"></i>
				</button>
			</div>

			<h5>Secondary Colors</h5>
			<div class="setting_colors">
				<button data-color="#18181b" class="second_1 change_sec_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#1e293b" class="second_2 change_sec_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#374151" class="second_3 change_sec_color">
					<i class="icon las la-check"></i>
				</button>
				<button data-color="#44403c" class="second_4 change_sec_color">
					<i class="icon las la-check"></i>
				</button>
			</div>
		</div>

		<!--Login wrap-->
		<div class="register_wrap section_padding_b" style="height: 100vh; ">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-xl-5 col-lg-7 col-md-9">
						<div class="register_form padding_default" style="margin-top: 100px;">
							<h4 class="title_2">Login</h4>
							<p class="mb-4 text_md">Login to start the journey</p>
							<form action="">
								<div class="row">
									<div class="col-12">
										<div class="single_billing_inp">
											<label>Username <span>*</span></label>
											<input id="usernamedt" type="email" placeholder="username" class="input-styled" required/>
										</div>
									</div>
									<div class="col-12">
										<div class="single_billing_inp">
											<label>Password <span>*</span></label>
											<input id="pasdt" type="password" placeholder="type password" class="input-styled" required/>
										</div>
									</div>
									<div class="col-12 mt-3">
										<button id="submitbutton" type="submit" class="default_btn xs_btn rounded px-4 d-block w-100">Login</button>
									</div>
								</div>
							</form>

							<div class="dif_regway my-3">
								<span class="txt">Don't have an account.?</span>
							</div>
							<p class="text-center mt-3 mb-0"> <a href="register.html" class="text-color">Register Now</a></p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- footer area -->
		<footer class="copyright_wrap">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-md-6">
						<p class="copyright_text">2025 | Finance Management</p>
					</div>
				</div>
			</div>
		</footer>
		<!-- all js -->
		<script src="assets/js/bootstrap.bundle.min.js"></script>
		<script src="assets/js/jquery-3.5.1.min.js"></script>
		<script src="assets/js/jquery-ui.min.js"></script>
		<script src="assets/js/slick.min.js"></script>
		<script src="assets/js/jquery.nice-select.min.js"></script>
		<script src="assets/sweetalert2/sweetalert2.js"></script>
		<script src="assets/js/app.js"></script>
		<script>
			$('.preloader').fadeOut(500, function(){ $('.preloader').remove(); } );
			const submitButton = document.getElementById("submitbutton");   
			document.getElementById("submitbutton").addEventListener("click", function(event) {
			  event.preventDefault(); 
			  $('.preloader').fadeIn(200);
			  submitButton.disabled = true;
			  submitButton.textContent = "Proses Login. . .";
			  const usernamedt = document.getElementById("usernamedt"); 
			  const pasdt = document.getElementById("pasdt");
		  
			  const usernamedtVal = usernamedt.value;
			  const pasdtVal = pasdt.value;
			  fetch(`https://script.google.com/macros/s/AKfycbyBfKNeW5yhAyL8BdaJo6AhkbVfEPeorcqOMjPElrCCZJU9sQpCKpWwGAAqSYqKSqFw2g/exec?dataset=login&usr=${usernamedtVal}&psr=${pasdtVal}`)
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						submitButton.disabled = false;
						submitButton.textContent = "Login";
						const user = data.data.nama;
        				const dt = data.data;

     				   localStorage.setItem('user', user);
     				   localStorage.setItem('dt', JSON.stringify(dt)); // Simpan sebagai string JSON
						$('.preloader').remove();
     				   window.location.href = "index.html";
     				 } else {
						submitButton.disabled = false;
						submitButton.textContent = "Login";
						$('.preloader').remove();
     				   Swal.fire({
     				     title: 'Login Gagal!',
     				     text: data.message || 'Username atau password salah',
     				     icon: 'error',
     				     confirmButtonText: 'Coba Lagi'
     				   });
     				 }
				})
				.catch(err => {
					submitButton.disabled = false;
					submitButton.textContent = "Login";
					$('.preloader').remove();
					Swal.fire({
					title: 'Ups!',
					text: err,
					icon: 'warning',
					confirmButtonText: 'Sorry!'
				  });
				});
			});
		  </script>
	</body>
</html>
